---
- name: Maven Deploy
  hosts: all

  vars:
    new_version: 3.1
    project_path: /media/marko-master/Code
    snapshot: False

  tasks:
    - name: Versioning Release 
      command: "mvn -f {{ project_path }}/pom.xml versions:set -DnewVersion={{ new_version }}"
      when: not snapshot 
      
    - name: Versioning Snapshot
      command: "mvn -f {{ project_path }}/pom.xml versions:set -DnewVersion={{ new_version }}-SNAPSHOT"
      when: snapshot 
     
    - name: Upload to Nexus
      command: "mvn -f {{ project_path }}/pom.xml clean deploy"